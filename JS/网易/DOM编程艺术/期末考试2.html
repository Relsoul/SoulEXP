<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<select name="year" id="year">
        <option value="0">--</option>
        <option value="1999">1999</option>
        <option value="2000">2000</option>
        <option value="2001">2001</option>
    </select>年
    <select name="month" id="month">
        <option value="0">--</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
    </select>月
    <select name="date" id="date">
        <option value="0">--</option>
    </select>日
    <script type="text/javascript">
    	var dateElem=document.getElementById("date");
    	var monthElem=document.getElementById("month");
    	var yearElem=document.getElementById("year");
    	var yearp,monthp;
    	console.log(dateElem.options)
    	
    	function checkMPass(elem){
    		if(elem.value>"0"){
    			
    		}else{
    			console.log(elem)
    			for(var i=dateElem.length-1;i>0;i--){
    				dateElem.remove(i)
    			}
    			dateElem.options[0].selected=true;
    			monthElem.options[0].selected=true;
    			return false
    		}
    		
    	}
    	function checkPass(elem){
    		console.log(elem.value)
    		if(elem.value>"0"){
    			
    		}else{
    		yearElem.options[0].selected=true;
    		dateElem.options[0].selected=true;
    		monthElem.options[0].selected=true;
    		}
    	}
    	
    	
    	//监听monthElem变化
    	monthElem.addEventListener("change",function(event){
    		if(yearElem.value==0){
    			monthElem.options[0].selected=true;
    			return false;
    		}
    		monthp=event.target.selectedIndex;
    		if(checkMPass(monthElem.options[monthp])==false){
    			return false
    		}
    		changeDate(yearp,monthp);
    	})
    	
    	//监听yearElem变化
    	yearElem.addEventListener("change",function(event){
    		yearp=event.target.selectedIndex;
    		checkPass(yearElem.options[yearp])
    		for(var i=monthElem.length-1;i>0;i--){
    				monthElem.remove(i)
    			}
    			for(var i=1;i<=12;i++){
    				var option=new Option(i,i)
    				monthElem.add(option)
    				monthElem.options[0].selected=true;
    			}
    		
    		
    	})
    	
    	function sumMonth(month){
    		month=parseInt(month)
    		console.log(month)
    		var bigM=[1,3,5,7,8,10,12];
    		if(month==2){
    				return "e"
    			}
    		for(var i=0;i<bigM.length;i++){
    			 if(bigM[i]==month){
    				return "big"
    			}
    		}
    		return "sm"
    	}
    	
    
    	function changeDate(year,month){
    		if(((year%4==0 && year%100!=0)||(year%100==0 && year%400==0))&&month==2){
    			for(var i=dateElem.length-1;i>0;i--){
    				dateElem.remove(i)
    			}
    			for(var i=1;i<=29;i++){
    				var option=new Option(i,i)
    				dateElem.add(option)
    				dateElem.options[1].selected=true;
    			}
    		}else if(sumMonth(month)=="big"){
    			for(var i=dateElem.length-1;i>0;i--){
    				dateElem.remove(i)
    			}
    				for(var i=1;i<=31;i++){
    				var option=new Option(i,i)
    				dateElem.add(option)
    				dateElem.options[1].selected=true;
    			}
    		}else if(sumMonth(month)=="sm"){
    			for(var i=dateElem.length-1;i>0;i--){
    				dateElem.remove(i)
    			}
    			for(var i=1;i<=30;i++){
    				var option=new Option(i,i)
    				dateElem.add(option)
    				dateElem.options[1].selected=true;
    			}
    		}else if(sumMonth(month)=="e"){
    			for(var i=dateElem.length-1;i>0;i--){
    				dateElem.remove(i)
    			}
    			for(var i=1;i<=28;i++){
    				var option=new Option(i,i)
    				dateElem.add(option)
    				dateElem.options[1].selected=true;
    			}
    		}
    	}
    	console.log(2008%400)
    </script>
	</body>
</html>
